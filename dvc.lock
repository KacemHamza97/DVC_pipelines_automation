schema: '2.0'
stages:
  data_load:
    cmd: python src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      md5: 61309f54ed0fdf77c2fa0b0d878da534
      size: 774
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_load:
          dataset_csv: data/raw/iris.csv
    outs:
    - path: data/raw/iris.csv
      md5: 4224576f0267bf88902f87f0f6200967
      size: 2757
  featurize:
    cmd: python src/stages/featurize.py --config=params.yaml
    deps:
    - path: data/raw/iris.csv
      md5: 4224576f0267bf88902f87f0f6200967
      size: 2757
    - path: src/stages/featurize.py
      md5: a9226f7887f301795c8f954ca0e1b593
      size: 1074
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_load:
          dataset_csv: data/raw/iris.csv
        featurize:
          features_path: data/processed/featured_iris.csv
          target_column: target
    outs:
    - path: data/processed/featured_iris.csv
      md5: 5d03a1564b3038fc35a842f8e4bde491
      size: 7260
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/processed/featured_iris.csv
      md5: 5d03a1564b3038fc35a842f8e4bde491
      size: 7260
    - path: src/stages/data_split.py
      md5: 3291d0cba26bf17caf5029dfc7b02ee8
      size: 1044
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_split:
          test_size: 0.2
          trainset_path: data/processed/train_iris.csv
          testset_path: data/processed/test_iris.csv
        featurize:
          features_path: data/processed/featured_iris.csv
          target_column: target
    outs:
    - path: data/processed/test_iris.csv
      md5: 53cb44db07e5451ec6f6fbbaa489f875
      size: 1497
    - path: data/processed/train_iris.csv
      md5: 30206b6aeae557d49553f33bbaf20b89
      size: 5732
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/processed/train_iris.csv
      md5: 30206b6aeae557d49553f33bbaf20b89
      size: 5732
    - path: src/stages/train.py
      md5: 33e85eb3e2878859f1383716edbc219f
      size: 2118
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_split.trainset_path: data/processed/train_iris.csv
        featurize.target_column: target
        train:
          n_iter: 5
          cv: 3
          param_grid:
            penalty:
            - l1
            - l2
            C:
            - 0.01
            - 0.1
            - 1
            - 10
            solver:
            - liblinear
            - saga
          model_path: models/model.joblib
    outs:
    - path: models/model.joblib
      md5: 1ad2f0f90a11960d2d52137dcf54413b
      size: 3566
  evaluate:
    cmd: python src/stages/evaluate.py --config=params.yaml
    deps:
    - path: data/processed/test_iris.csv
      md5: 53cb44db07e5451ec6f6fbbaa489f875
      size: 1497
    - path: models/model.joblib
      md5: 1ad2f0f90a11960d2d52137dcf54413b
      size: 3566
    - path: src/stages/evaluate.py
      md5: d36a4253b4d3e6a2549a9b0812237e16
      size: 1916
    params:
      params.yaml:
        base:
          random_state: 42
          log_level: INFO
        data_split.testset_path: data/processed/test_iris.csv
        evaluate:
          reports_dir: reports
          metrics_file: metrics.json
          confusion_matrix_image: confusion_matrix.png
        featurize.target_column: target
    outs:
    - path: reports/confusion_matrix.png
      md5: 32a238600131d421cb5b551849100059
      size: 24920
    - path: reports/metrics.json
      md5: 3329ba1a6b18407f725a1e25a5500560
      size: 17
